[
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Asset Repair",
  "modified": "2020-10-07 17:34:57.442568",
  "name": "Asset Repair-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Asset Repair', {\n\tasset_name(frm) {\n\t\t// your code here\n\t\tif(frm.doc.asset_name) {\n\t\t    frappe.model.get_value('Asset', {'name': frm.doc.asset_name}, 'engineer', \n\t\t        function(res){\n\t\t            frm.set_value('assign_to', res.engineer)\n\t\t            \n                })\n\t\t}\n    }\n})\n\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Item",
  "modified": "2020-04-16 12:02:15.717061",
  "name": "Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "function updateUOM(frm){\n    var itemDocument = frm.doc\n    console.log(\"in function update\")\n    \n    \n    if (frm.doc.uoms.length < \"2\"){\n        console.log(\"In If of update\")\n        \n        let d = frm.add_child(\"uoms\");\n        d.uom = \"Nos\";\n\t    d.conversion_factor = itemDocument.standard_weight;\n\t\t refresh_field(\"uoms\");\n\t    console.log(\"print value of d\",d);\n\t    \n\t    console.log(\"Leaving If of update\")\n        \n    }\n    else{\n        console.log(\"In Else of update\")\n        console.log(frm.doc.uoms[1])\n        frm.doc.uoms[1].conversion_factor = itemDocument.standard_weight;\n        \n        refresh_field(\"uoms\");\n        \n        \n        console.log(\"LEaving Else of update\")\n        \n    }\n    \n    \n    \n}\n\n\nfunction weight(frm){\n    var a = frm.doc;\n    if(a.diameter!==0 && a.thickness!==0){\n        var w = 3.14 * (a.diameter/2) * (a.diameter/2) * a.thickness * (2700/1000000000);\n\t\tfrm.set_value('standard_weight',w);\n    }\n    if(a.diameter===0 || a.thickness===0){\n        frm.set_value('standard_weight','0');\n        \n    }\n}\n\n\n\n\nfrappe.ui.form.on('Item', {\n\tdiameter:function(frm) {\n\t    weight(frm)\n    }\n    \n});\n\nfrappe.ui.form.on('Item', {\n\tthickness:function(frm){\n\t     console.log(\"============\")\n\t     console.log(doc.name)\n\t    weight(frm)\n\t    refresh_field(\"standard_weight\");\n\t}\n\t\n});\t\n\nfrappe.ui.form.on('Item',{\n    standard_weight:function(frm){\n        updateUOM(frm);\n        console.log(doc.name)\n    }\n    \n    \n});\n    "
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Payment Entry",
  "modified": "2020-04-16 17:38:09.932677",
  "name": "Payment Entry-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "function series(frm){\n    var mode = frm.doc.payment_type;\n    console.log(\"mode-->\",mode);\n        if (mode ===\"Receive\"){\n            var crv = \"CRV-.YYYY.-\";\n            frm.set_value('naming_series',crv);\n        }\n        else{\n            var cpv = \"CPV-.YYYY.-\";\n            frm.set_value('naming_series',cpv);\n            // if (mode == \"Pay\"){\n//               frappe.call({\n// \t\t    method: \"frappe.client.get\",\n// \t\t    args:{\n// \t\t        \"doctype\":\"Purchase Invoice\",\n// \t\t        \"name\": frappe.inv\n// \t\t    },\n// \t\t    callback(r){\n// \t\t        console.log(r.message)\n// \t\t        var cl = r.message;\n// \t\t        if (mode ===\"Pay\"){\n// \t\t            console.log(cl.withholding_receipt_no, \"with holding no\")\n// \t\t           frm.set_value('withholding_receipt_no',cl.withholding_receipt_no); \n// \t\t        } \n\t\t        \n// \t\t    }\n// \t\t}) \n            // }\n        }\n   \n}\n\n\n\n\n\n\nfrappe.ui.form.on('Payment Entry', {\n\tpayment_type:function(frm) {\n\t    \n\t\tseries(frm)\n\t\trefresh_field(\"naming_series\");\n\t} \n})\n\nfrappe.ui.form.on('Payment Entry', {\n\trefresh: function(frm) {\n        series(frm)\n\t\trefresh_field(\"naming_series\");\n\t\tfrm.fields_dict['payment_accounts_section'].collapse(1);\n\t\tfrm.fields_dict['section_break_12'].collapse(1);\n\t\trefresh_field('payment_accounts_section');\n\t\trefresh_field('section_break_12');\n\t\t\n\t\t\n\n\t\t\n\t\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Purchase Order",
  "modified": "2020-04-14 22:34:39.326993",
  "name": "Purchase Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Order', {\n\trefresh : function(frm) {\n\t\tfrm.set_df_property(\"supplier_address\", \"reqd\", 1);\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Purchase Invoice",
  "modified": "2020-04-17 14:10:10.026052",
  "name": "Purchase Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "// frappe.ui.form.on('Purchase Invoice', {\n// \trefresh:function(frm) {\n// \t    console.log(\"+==============================\")\n// \t    console.log(frm.doc.name)\n// \t   // frappe.inv = frm.doc.name\n// \tfrm.set_df_property('supplier_address', 'reqd', 1);\n// \tfrm.set_df_property('bill_no', 'reqd', 1);\n// \tfrm.fields_dict['supplier_invoice_details'].collapse(1);\n// \tfrm.refresh_field('supplier_invoice_details');\n// \tfrm.fields_dict['section_break_12'].collapse(1);\n// \tfrm.refresh_field('section_break_13');\n// \tfrm.fields_dict['more_info'].collapse(1);\n// \tfrm.refresh_field('more_info');\n// \t}\n// });\n\n\nfrappe.ui.form.on('Purchase Invoice', {\n\trefresh:function(frm) {\n \t    frm.set_df_property('supplier_address', 'reqd', 1);\n    \tfrm.set_df_property('bill_no', 'reqd', 1);\n    \tfrm.fields_dict['supplier_invoice_details'].collapse(1);\n    \tfrm.refresh_field('supplier_invoice_details');\n    \tfrm.fields_dict['section_break_12'].collapse(1);\n    \tfrm.refresh_field('section_break_13');\n    \tfrm.fields_dict['more_info'].collapse(1);\n    \tfrm.refresh_field('more_info');\n    \t}\n});\n\n\n\nfrappe.ui.form.on('Purchase Invoice', {\n        bill_no:function(frm) {\n\t\tvar a = frm.doc.bill_no;\n\t\tvar mystr = a.replace(/\\D/g,'');\n\t\tfrm.set_value('bill_no',mystr);\n\t\tfrm.refresh_field('bill_no')\n\t}\n});\n\nfrappe.ui.form.on('Purchase Invoice', {\n        withholding_receipt_no:function(frm) {\n\t\tvar a = frm.doc.withholding_receipt_no;\n\t\tvar mystr = a.replace(/\\D/g,'');\n\t\tfrm.set_value('withholding_receipt_no',mystr);\n\t\tfrm.refresh_field('withholding_receipt_no')\n\t}\n});\n\nfrappe.ui.form.on('Purchase Invoice', {\n        refresh:function(frm) {\n\t\t\n\t    frm.set_df_property('withholding_receipt_no', 'unique', 1)\n\t\tfrm.refresh_field('withholding_receipt_no')\n\t}\n});\n\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Invoice",
  "modified": "2020-04-16 15:36:25.752183",
  "name": "Sales Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Invoice', {\n\trefresh:function(frm) {\n    frm.set_df_property('customer_address', 'reqd', 1);\n    frm.toggle_display(\"territory\",false);\n\t}\n});\n\nfrappe.ui.form.on('Sales Invoice', {\n        fs_number:function(frm) {\n\t\tvar a = frm.doc.fs_number;\n\t\tvar mystr = a.replace(/\\D/g,'');\n\t\tfrm.set_value('fs_number',mystr);\n\t\tfrm.refresh_field('fs_number')\n\t}\n});\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Customer",
  "modified": "2020-04-07 09:49:23.596050",
  "name": "Customer-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Customer', {\n\trefresh:function(frm) {\n        frm.set_df_property('tax_id', 'reqd', 1)\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Address",
  "modified": "2020-04-07 12:13:25.715193",
  "name": "Address-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Address', {\n\trefresh:function(frm) {\n// \t\tfrm.toggle_display(\"address_line2\",false);\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Order",
  "modified": "2020-04-17 14:03:51.969358",
  "name": "Sales Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Order', {\n\trefresh:function(frm) {\n\t\tfrm.toggle_display(\"territory\",false);\n\t\tfrm.set_df_property('customer_address', 'reqd', 1)\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Quotation",
  "modified": "2020-04-16 13:46:26.323147",
  "name": "Quotation-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Quotation', {\n\trefresh:function(frm) {\n\t\tfrm.set_df_property('customer_address', 'reqd', 1)\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Delivery Note",
  "modified": "2020-04-16 14:56:07.891411",
  "name": "Delivery Note-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Delivery Note', {\n\tpo_no:function(frm) {\n\t\tvar a = frm.doc.po_no;\n\t\t\n\t\tconsole.log(\"type of a -->\",typeof a);\n\t\t\n\t\tvar mystr = a.replace(/\\D/g,'');\n\t\tconsole.log(\"removed alphabets-->\",mystr);\n\t\tfrm.set_value('po_no',mystr);\n\t\tfrm.refresh_field('po_no')\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Asset Maintenance Log",
  "modified": "2020-10-15 19:53:40.893704",
  "name": "Asset Maintenance Log-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Asset Maintenance Log', {\n\trefresh(frm) {\n\t\t// your code here\n// \t\tif (frm.doc.docstatus===0) {\n// \t\t\tfrm.add_custom_button(__('Purchase Invoice'), function() {\n// \t\t\t\terpnext.utils.map_current_doc({\n// \t\t\t\t\tmethod: \"erpnext.accounts.doctype.purchase_invoice.purchase_invoice.make_stock_entry\",\n// \t\t\t\t\tsource_doctype: \"Purchase Invoice\",\n// \t\t\t\t\ttarget: frm,\n// \t\t\t\t\tdate_field: \"posting_date\",\n// \t\t\t\t\tsetters: {\n// \t\t\t\t\t\tsupplier: frm.doc.supplier || undefined,\n// \t\t\t\t\t},\n// \t\t\t\t\tget_query_filters: {\n// \t\t\t\t\t\tdocstatus: 1\n// \t\t\t\t\t}\n// \t\t\t\t})\n// \t\t\t}, __(\"Get items from\"));\n\t\t\t\n// \t}  \n\tif (frm.doc.docstatus===0) {\n\t\t\tfrm.add_custom_button(__('Stock Entry'), function() {\n\t\t\t   new frappe.ui.form.MultiSelectDialog({\n                    doctype: \"Stock Entry\",\n                    target: frm,\n                    setters: {},\n                    date_field: \"posting_date\",\n                    get_query() {\n                        return {\n                            filters: { docstatus: ['!=', 2] }\n                        }\n                    },\n                    action(selections) {\n                        console.log(selections);\n                       console.log(typeof(selections))\n                       for (var i in selections){\n                           console.log(selections[i])\n                           frappe.call({\n                               method: \"ethal.utils.set_items_from_stock_entry\",\n                               args: {\n                                   name: selections[i]\n                               },\n                               callback: function(r){\n                                   console.log(r.message)\n                                  let op = r.message\n                                //   me.frm.add_child(\"part_used\").item = op['item_code'];\n                                //   me.frm.refresh_field(\"part_used\");\n                                var childTable = cur_frm.add_child(\"part_used\");\n                                childTable.item=op['item_code']\n                                childTable.item_name=op['item_name']\n                                childTable.stock_entry = op['parent']\n                                childTable.item_group=op['item_group']\n                                childTable.dscription=op['description']\n                                childTable.uom=op['uom']\n                                childTable.quantity=op['qty']\n                                cur_frm.refresh_fields(\"part_used\");\n                                $('.modal').hide();\n                               }\n                           })\n                    }\n                    }\n                });\n\t\t\t}, __(\"Get items from\"));\n\t}\n    }\n})"
 }
]